{"file":"/Users/devprofile/Documents/GitHub/musafir_backend/src/auth/guards/auth.guard.ts","mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,2CAIwB;AACxB,uCAAyC;AACzC,+CAA6C;AAGtC,IAAM,YAAY,GAAlB,MAAM,YAAa,SAAQ,IAAA,oBAAS,EAAC,KAAK,CAAC;IAChD,YAA6B,SAAoB;QAC/C,KAAK,EAAE,CAAC;QADmB,cAAS,GAAT,SAAS,CAAW;IAEjD,CAAC;IAEK,WAAW,CAAC,OAAyB;;;;;YACzC,mEAAmE;YACnE,MAAM,QAAQ,GAAG,IAAI,CAAC,SAAS,CAAC,iBAAiB,CAAU,UAAU,EAAE;gBACrE,OAAO,CAAC,UAAU,EAAE;gBACpB,OAAO,CAAC,QAAQ,EAAE;aACnB,CAAC,CAAC;YACH,IAAI,QAAQ,EAAE,CAAC;gBACb,OAAO,IAAI,CAAC;YACd,CAAC;YACD,OAAO,CAAC,MAAM,OAAM,WAAW,YAAC,OAAO,CAAC,CAAY,CAAC;QACvD,CAAC;KAAA;IAED,aAAa,CAAC,GAAG,EAAE,IAAI,EAAE,IAAI,EAAE,OAAyB;QACtD,IAAI,CAAC,IAAI,EAAE,CAAC;YACR,OAAO,IAAI,CAAC;QAChB,CAAC;QAED,IAAI,GAAG,EAAE,CAAC;YACR,MAAM,GAAG,IAAI,IAAI,8BAAqB,CAAC,cAAc,CAAC,CAAC;QACzD,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;CACF,CAAA;AA3BY,oCAAY;uBAAZ,YAAY;IADxB,IAAA,mBAAU,GAAE;qCAE6B,gBAAS;GADtC,YAAY,CA2BxB","names":[],"sources":["/Users/devprofile/Documents/GitHub/musafir_backend/src/auth/guards/auth.guard.ts"],"sourcesContent":["import {\n  Injectable,\n  ExecutionContext,\n  UnauthorizedException,\n} from '@nestjs/common';\nimport { Reflector } from '@nestjs/core';\nimport { AuthGuard } from '@nestjs/passport';\n\n@Injectable()\nexport class JwtAuthGuard extends AuthGuard('jwt') {\n  constructor(private readonly reflector: Reflector) {\n    super();\n  }\n\n  async canActivate(context: ExecutionContext): Promise<boolean> {\n    // Allow handlers/classes decorated with @Public to bypass JWT auth\n    const isPublic = this.reflector.getAllAndOverride<boolean>('isPublic', [\n      context.getHandler(),\n      context.getClass(),\n    ]);\n    if (isPublic) {\n      return true;\n    }\n    return (await super.canActivate(context)) as boolean;\n  }\n\n  handleRequest(err, user, info, context: ExecutionContext) {\n    if (!user) {\n        return null;\n    }\n\n    if (err) {\n      throw err || new UnauthorizedException('Unauthorized');\n    }\n    return user;\n  }\n}\n"],"version":3}